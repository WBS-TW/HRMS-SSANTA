<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>14 MTM HRMS Library: GC-HRMS | Handbook of comprehensive suspect and nontarget workflows in environmental analysis using GC and LC-HRMS</title>
  <meta name="description" content="SSANTA." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="14 MTM HRMS Library: GC-HRMS | Handbook of comprehensive suspect and nontarget workflows in environmental analysis using GC and LC-HRMS" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://www.oru.se/personal/thanh_wang/images/ORU.png" />
  <meta property="og:description" content="SSANTA." />
  <meta name="github-repo" content="WBS-TW/WBS-TW.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="14 MTM HRMS Library: GC-HRMS | Handbook of comprehensive suspect and nontarget workflows in environmental analysis using GC and LC-HRMS" />
  
  <meta name="twitter:description" content="SSANTA." />
  <meta name="twitter:image" content="https://www.oru.se/personal/thanh_wang/images/ORU.png" />

<meta name="author" content="Thanh Wang,   MTM Research Centre, Örebro University" />


<meta name="date" content="2023-02-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="DataConversion.html"/>
<link rel="next" href="mtm-hrms-library-lc-hrms.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.9/grViz.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.27/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SSA/NTA</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="Intro.html"><a href="Intro.html"><i class="fa fa-check"></i><b>1</b> <strong>Introduction and concepts</strong></a>
<ul>
<li class="chapter" data-level="1.1" data-path="Intro.html"><a href="Intro.html#terminologies"><i class="fa fa-check"></i><b>1.1</b> Terminologies</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ExpDesign.html"><a href="ExpDesign.html"><i class="fa fa-check"></i><b>2</b> <strong>Experimental design</strong></a>
<ul>
<li class="chapter" data-level="2.1" data-path="ExpDesign.html"><a href="ExpDesign.html#hypothesis"><i class="fa fa-check"></i><b>2.1</b> Hypothesis</a></li>
<li class="chapter" data-level="2.2" data-path="ExpDesign.html"><a href="ExpDesign.html#experimental-design"><i class="fa fa-check"></i><b>2.2</b> Experimental design</a></li>
<li class="chapter" data-level="2.3" data-path="ExpDesign.html"><a href="ExpDesign.html#qaqc-measures"><i class="fa fa-check"></i><b>2.3</b> QA/QC measures</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="ExpDesign.html"><a href="ExpDesign.html#recovery-extraction-efficieny"><i class="fa fa-check"></i><b>2.3.1</b> Recovery (Extraction efficieny)</a></li>
<li class="chapter" data-level="2.3.2" data-path="ExpDesign.html"><a href="ExpDesign.html#matrix-effects"><i class="fa fa-check"></i><b>2.3.2</b> Matrix effects</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="ExpDesign.html"><a href="ExpDesign.html#data-directory-structure"><i class="fa fa-check"></i><b>2.4</b> Data directory structure</a></li>
<li class="chapter" data-level="2.5" data-path="ExpDesign.html"><a href="ExpDesign.html#sampling-design-and-collection"><i class="fa fa-check"></i><b>2.5</b> Sampling design and collection</a></li>
<li class="chapter" data-level="2.6" data-path="ExpDesign.html"><a href="ExpDesign.html#collection-of-metadata"><i class="fa fa-check"></i><b>2.6</b> Collection of metadata</a></li>
<li class="chapter" data-level="2.7" data-path="ExpDesign.html"><a href="ExpDesign.html#chemical-analysis"><i class="fa fa-check"></i><b>2.7</b> Chemical analysis</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="ExpDesign.html"><a href="ExpDesign.html#data-recording-modes"><i class="fa fa-check"></i><b>2.7.1</b> Data recording modes</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="ExpDesign.html"><a href="ExpDesign.html#data-analysis"><i class="fa fa-check"></i><b>2.8</b> Data analysis</a></li>
<li class="chapter" data-level="2.9" data-path="ExpDesign.html"><a href="ExpDesign.html#workflow-examples"><i class="fa fa-check"></i><b>2.9</b> Workflow examples</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="SamplePretreatment.html"><a href="SamplePretreatment.html"><i class="fa fa-check"></i><b>3</b> <strong>Sample pretreatment for nontarget and suspect screening</strong></a>
<ul>
<li class="chapter" data-level="3.1" data-path="SamplePretreatment.html"><a href="SamplePretreatment.html#accelerated-solvent-extraction-ase"><i class="fa fa-check"></i><b>3.1</b> Accelerated solvent extraction (ASE)</a></li>
<li class="chapter" data-level="3.2" data-path="SamplePretreatment.html"><a href="SamplePretreatment.html#ultrasonic-extraction"><i class="fa fa-check"></i><b>3.2</b> Ultrasonic extraction</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="MSPreprocess.html"><a href="MSPreprocess.html"><i class="fa fa-check"></i><b>4</b> <strong>Pre-processing HRMS data</strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="MSPreprocess.html"><a href="MSPreprocess.html#raw-data-conversion"><i class="fa fa-check"></i><b>4.1</b> Raw data conversion</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="MSPreprocess.html"><a href="MSPreprocess.html#msconvert"><i class="fa fa-check"></i><b>4.1.1</b> MSConvert</a></li>
<li class="chapter" data-level="4.1.2" data-path="MSPreprocess.html"><a href="MSPreprocess.html#waters-mse"><i class="fa fa-check"></i><b>4.1.2</b> Waters MSe</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="MSPreprocess.html"><a href="MSPreprocess.html#peak-picking"><i class="fa fa-check"></i><b>4.2</b> Peak picking</a></li>
<li class="chapter" data-level="4.3" data-path="MSPreprocess.html"><a href="MSPreprocess.html#open-tools-for-preprocessing"><i class="fa fa-check"></i><b>4.3</b> Open tools for preprocessing</a></li>
<li class="chapter" data-level="4.4" data-path="MSPreprocess.html"><a href="MSPreprocess.html#openms-and-toppview"><i class="fa fa-check"></i><b>4.4</b> OpenMS and Toppview</a></li>
<li class="chapter" data-level="4.5" data-path="MSPreprocess.html"><a href="MSPreprocess.html#msnbase-and-xcms"><i class="fa fa-check"></i><b>4.5</b> MsnBase and XCMS</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="MSPreprocess.html"><a href="MSPreprocess.html#xcms"><i class="fa fa-check"></i><b>4.5.1</b> XCMS</a></li>
<li class="chapter" data-level="4.5.2" data-path="MSPreprocess.html"><a href="MSPreprocess.html#camera"><i class="fa fa-check"></i><b>4.5.2</b> CAMERA</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="MSPreprocess.html"><a href="MSPreprocess.html#patroon"><i class="fa fa-check"></i><b>4.6</b> PatRoon</a></li>
<li class="chapter" data-level="4.7" data-path="MSPreprocess.html"><a href="MSPreprocess.html#ms-dial"><i class="fa fa-check"></i><b>4.7</b> MS-DIAL</a></li>
<li class="chapter" data-level="4.8" data-path="MSPreprocess.html"><a href="MSPreprocess.html#output-formats"><i class="fa fa-check"></i><b>4.8</b> Output formats</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="suspectScreening.html"><a href="suspectScreening.html"><i class="fa fa-check"></i><b>5</b> <strong>Suspect screening</strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="suspectScreening.html"><a href="suspectScreening.html#listing-suspects"><i class="fa fa-check"></i><b>5.1</b> Listing suspects</a></li>
<li class="chapter" data-level="5.2" data-path="suspectScreening.html"><a href="suspectScreening.html#suspect-scoring"><i class="fa fa-check"></i><b>5.2</b> Suspect scoring</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="MassDefect.html"><a href="MassDefect.html"><i class="fa fa-check"></i><b>6</b> <strong>Mass defect plots</strong></a>
<ul>
<li class="chapter" data-level="6.1" data-path="MassDefect.html"><a href="MassDefect.html#mdplotr"><i class="fa fa-check"></i><b>6.1</b> MDPlotR</a></li>
<li class="chapter" data-level="6.2" data-path="MassDefect.html"><a href="MassDefect.html#findhalo"><i class="fa fa-check"></i><b>6.2</b> findhalo</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="RetentionTime.html"><a href="RetentionTime.html"><i class="fa fa-check"></i><b>7</b> <strong>Retention time index and prediction</strong></a>
<ul>
<li class="chapter" data-level="7.1" data-path="RetentionTime.html"><a href="RetentionTime.html#lc"><i class="fa fa-check"></i><b>7.1</b> LC</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="RetentionTime.html"><a href="RetentionTime.html#retip---retention-time-prediction-for-metabolomics"><i class="fa fa-check"></i><b>7.1.1</b> Retip - Retention Time prediction for Metabolomics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="MolecularNetworks.html"><a href="MolecularNetworks.html"><i class="fa fa-check"></i><b>8</b> <strong>Molecular networks</strong></a>
<ul>
<li class="chapter" data-level="8.1" data-path="MolecularNetworks.html"><a href="MolecularNetworks.html#metgem"><i class="fa fa-check"></i><b>8.1</b> MetGem</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="MolecularNetworks.html"><a href="MolecularNetworks.html#metgem-parameters"><i class="fa fa-check"></i><b>8.1.1</b> Metgem parameters</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="MolecularNetworks.html"><a href="MolecularNetworks.html#gnps"><i class="fa fa-check"></i><b>8.2</b> GNPS</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Library.html"><a href="Library.html"><i class="fa fa-check"></i><b>9</b> <strong>Spectral libraries</strong></a>
<ul>
<li class="chapter" data-level="9.1" data-path="Library.html"><a href="Library.html#matchms"><i class="fa fa-check"></i><b>9.1</b> MatchMS</a></li>
<li class="chapter" data-level="9.2" data-path="Library.html"><a href="Library.html#in-silico-fragmentation"><i class="fa fa-check"></i><b>9.2</b> IN SILICO FRAGMENTATION</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="Library.html"><a href="Library.html#metfrag"><i class="fa fa-check"></i><b>9.2.1</b> Metfrag</a></li>
<li class="chapter" data-level="9.2.2" data-path="Library.html"><a href="Library.html#sirius-csi-fingerid"><i class="fa fa-check"></i><b>9.2.2</b> Sirius CSI FingerID</a></li>
<li class="chapter" data-level="9.2.3" data-path="Library.html"><a href="Library.html#cfm-id"><i class="fa fa-check"></i><b>9.2.3</b> CFM-ID</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="Library.html"><a href="Library.html#neims"><i class="fa fa-check"></i><b>9.3</b> NEIMS</a></li>
<li class="chapter" data-level="9.4" data-path="Library.html"><a href="Library.html#deepei"><i class="fa fa-check"></i><b>9.4</b> DeepEI</a></li>
<li class="chapter" data-level="9.5" data-path="Library.html"><a href="Library.html#qcxms"><i class="fa fa-check"></i><b>9.5</b> QCxMS</a></li>
<li class="chapter" data-level="9.6" data-path="Library.html"><a href="Library.html#library-search"><i class="fa fa-check"></i><b>9.6</b> LIBRARY SEARCH</a></li>
<li class="chapter" data-level="9.7" data-path="Library.html"><a href="Library.html#reading-mgf-files-in-r"><i class="fa fa-check"></i><b>9.7</b> Reading mgf files in R</a></li>
<li class="chapter" data-level="9.8" data-path="Library.html"><a href="Library.html#lib2nist"><i class="fa fa-check"></i><b>9.8</b> LIB2NIST</a></li>
<li class="chapter" data-level="9.9" data-path="Library.html"><a href="Library.html#mspepsearch"><i class="fa fa-check"></i><b>9.9</b> MSPepSearch</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="PostProcessing.html"><a href="PostProcessing.html"><i class="fa fa-check"></i><b>10</b> <strong>Data post-processing</strong></a>
<ul>
<li class="chapter" data-level="10.1" data-path="PostProcessing.html"><a href="PostProcessing.html#hierarchical-clustering"><i class="fa fa-check"></i><b>10.1</b> Hierarchical clustering</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ExampleDust.html"><a href="ExampleDust.html"><i class="fa fa-check"></i><b>11</b> Example workflow: indoor dust</a>
<ul>
<li class="chapter" data-level="11.1" data-path="ExampleDust.html"><a href="ExampleDust.html#gc-orbitrap-hrms-workflow"><i class="fa fa-check"></i><b>11.1</b> GC orbitrap HRMS workflow</a></li>
<li class="chapter" data-level="11.2" data-path="ExampleDust.html"><a href="ExampleDust.html#lc-hrms-using-waters-mse-dia-workflow"><i class="fa fa-check"></i><b>11.2</b> LC-HRMS using Waters MSe DIA workflow</a></li>
<li class="chapter" data-level="11.3" data-path="ExampleDust.html"><a href="ExampleDust.html#workflow-for-centroiding-of-raw-file-peak-picking-and-correlation-of-ms1-and-ms2"><i class="fa fa-check"></i><b>11.3</b> Workflow for centroiding of raw file, peak picking and correlation of MS1 and MS2</a></li>
<li class="chapter" data-level="11.4" data-path="ExampleDust.html"><a href="ExampleDust.html#first-convert-unifi-data-using-msconvert"><i class="fa fa-check"></i><b>11.4</b> First convert unifi data using MSConvert</a></li>
<li class="chapter" data-level="11.5" data-path="ExampleDust.html"><a href="ExampleDust.html#centroiding-raw-data-from-mzml-using-msnbase"><i class="fa fa-check"></i><b>11.5</b> Centroiding raw data from mzML using MSnbase</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="ExamplePFAS.html"><a href="ExamplePFAS.html"><i class="fa fa-check"></i><b>12</b> Example workflow: PFASs</a></li>
<li class="chapter" data-level="13" data-path="DataConversion.html"><a href="DataConversion.html"><i class="fa fa-check"></i><b>13</b> Conversion of raw data from HRMS vendor format to open format</a>
<ul>
<li class="chapter" data-level="13.1" data-path="DataConversion.html"><a href="DataConversion.html#MSConvertGC"><i class="fa fa-check"></i><b>13.1</b> GC orbitrap HRMS: convert .raw data to .mzML using MSconvert</a></li>
<li class="chapter" data-level="13.2" data-path="DataConversion.html"><a href="DataConversion.html#MSConvertunifi"><i class="fa fa-check"></i><b>13.2</b> LC-HRMS: convert the raw data file from unifi to mzML using MSconvert</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="GClib.html"><a href="GClib.html"><i class="fa fa-check"></i><b>14</b> MTM HRMS Library: GC-HRMS</a>
<ul>
<li class="chapter" data-level="14.1" data-path="GClib.html"><a href="GClib.html#analyze-the-standards-using-hrms"><i class="fa fa-check"></i><b>14.1</b> Analyze the standards using HRMS</a></li>
<li class="chapter" data-level="14.2" data-path="GClib.html"><a href="GClib.html#convert-the-raw-data-file-from-gc-hrms-analysis-to-.mzml-using-msconvert-for-unifi-conversion-see-section-refmsconvertgc"><i class="fa fa-check"></i><b>14.2</b> Convert the raw data file from GC-HRMS analysis to .mzML using MSconvert (For unifi conversion, see section @ref(MSConvertGC)</a></li>
<li class="chapter" data-level="14.3" data-path="GClib.html"><a href="GClib.html#fill-in-the-standard-infosheet"><i class="fa fa-check"></i><b>14.3</b> Fill in the standard infosheet</a></li>
<li class="chapter" data-level="14.4" data-path="GClib.html"><a href="GClib.html#use-ms-dial-to-perform-spectral-deconvolution-and-generate-spectra-for-each-compound"><i class="fa fa-check"></i><b>14.4</b> Use MS-DIAL to perform spectral deconvolution and generate spectra for each compound</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="mtm-hrms-library-lc-hrms.html"><a href="mtm-hrms-library-lc-hrms.html"><i class="fa fa-check"></i><b>15</b> MTM HRMS Library: LC-HRMS</a>
<ul>
<li class="chapter" data-level="15.1" data-path="mtm-hrms-library-lc-hrms.html"><a href="mtm-hrms-library-lc-hrms.html#analyze-the-standards-using-hrms-1"><i class="fa fa-check"></i><b>15.1</b> Analyze the standards using HRMS</a></li>
<li class="chapter" data-level="15.2" data-path="mtm-hrms-library-lc-hrms.html"><a href="mtm-hrms-library-lc-hrms.html#convert-the-raw-data-file-from-lc-hrms-in-unifi-to-mzml-using-msconvert"><i class="fa fa-check"></i><b>15.2</b> Convert the raw data file from LC-HRMS in unifi to mzML using MSconvert</a></li>
<li class="chapter" data-level="15.3" data-path="mtm-hrms-library-lc-hrms.html"><a href="mtm-hrms-library-lc-hrms.html#fill-in-the-standard-infosheet-1"><i class="fa fa-check"></i><b>15.3</b> Fill in the standard infosheet</a></li>
<li class="chapter" data-level="15.4" data-path="mtm-hrms-library-lc-hrms.html"><a href="mtm-hrms-library-lc-hrms.html#use-ms-dial-to-perform-spectral-deconvolution-and-generate-spectra-for-each-compound-1"><i class="fa fa-check"></i><b>15.4</b> Use MS-DIAL to perform spectral deconvolution and generate spectra for each compound</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="GCMSDIAL.html"><a href="GCMSDIAL.html"><i class="fa fa-check"></i><b>16</b> GC-HRMS raw data preprocessing with MS-DIAL</a>
<ul>
<li class="chapter" data-level="16.1" data-path="GCMSDIAL.html"><a href="GCMSDIAL.html#post-processing"><i class="fa fa-check"></i><b>16.1</b> Post processing</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="GCMSDIAL.html"><a href="GCMSDIAL.html#additional-search-against-nist-library-using-mspepsearch-and-ramsearch"><i class="fa fa-check"></i><b>16.1.1</b> Additional search against NIST library using MSPepSearch and RamSearch</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="GCMSDIAL.html"><a href="GCMSDIAL.html#further-explanation-for-some-terminologies-apart-from-the-tutorial-httpsmtbinfo-team.github.iomtbinfo.github.ioms-dialtutorial"><i class="fa fa-check"></i><b>16.2</b> Further explanation for some terminologies apart from the tutorial (<span>https://mtbinfo-team.github.io/mtbinfo.github.io/MS-DIAL/tutorial</span>)</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="LCHRMSMSe.html"><a href="LCHRMSMSe.html"><i class="fa fa-check"></i><b>17</b> LC-HRMS MSe raw data preprocessing with MS-DIAL</a>
<ul>
<li class="chapter" data-level="17.1" data-path="LCHRMSMSe.html"><a href="LCHRMSMSe.html#some-recommended-values-for-g2-xs-qtof"><i class="fa fa-check"></i><b>17.1</b> Some recommended values for G2 XS qtof:</a></li>
<li class="chapter" data-level="17.2" data-path="LCHRMSMSe.html"><a href="LCHRMSMSe.html#post-processing-1"><i class="fa fa-check"></i><b>17.2</b> Post processing</a></li>
<li class="chapter" data-level="17.3" data-path="LCHRMSMSe.html"><a href="LCHRMSMSe.html#further-explanation-for-some-terminologies-apart-from-the-tutorial-httpsmtbinfo-team.github.iomtbinfo.github.ioms-dialtutorial-1"><i class="fa fa-check"></i><b>17.3</b> Further explanation for some terminologies apart from the tutorial (<span>https://mtbinfo-team.github.io/mtbinfo.github.io/MS-DIAL/tutorial</span>)</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="GCOrbitrapHandbook.html"><a href="GCOrbitrapHandbook.html"><i class="fa fa-check"></i><b>18</b> A handbook on GC Q Exactive orbitrap use</a>
<ul>
<li class="chapter" data-level="18.1" data-path="GCOrbitrapHandbook.html"><a href="GCOrbitrapHandbook.html#acquisition-parameters"><i class="fa fa-check"></i><b>18.1</b> Acquisition parameters</a></li>
<li class="chapter" data-level="18.2" data-path="GCOrbitrapHandbook.html"><a href="GCOrbitrapHandbook.html#chemical-ionization"><i class="fa fa-check"></i><b>18.2</b> Chemical ionization</a></li>
<li class="chapter" data-level="18.3" data-path="GCOrbitrapHandbook.html"><a href="GCOrbitrapHandbook.html#terminologies-1"><i class="fa fa-check"></i><b>18.3</b> Terminologies</a></li>
<li class="chapter" data-level="18.4" data-path="GCOrbitrapHandbook.html"><a href="GCOrbitrapHandbook.html#cleaning-source"><i class="fa fa-check"></i><b>18.4</b> Cleaning source</a></li>
<li class="chapter" data-level="18.5" data-path="GCOrbitrapHandbook.html"><a href="GCOrbitrapHandbook.html#performance-mixture"><i class="fa fa-check"></i><b>18.5</b> Performance mixture</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="reproducible-research-using-docker-containers-and-similar-tools.html"><a href="reproducible-research-using-docker-containers-and-similar-tools.html"><i class="fa fa-check"></i><b>19</b> Reproducible research using Docker containers and similar tools</a>
<ul>
<li class="chapter" data-level="19.1" data-path="reproducible-research-using-docker-containers-and-similar-tools.html"><a href="reproducible-research-using-docker-containers-and-similar-tools.html#docker"><i class="fa fa-check"></i><b>19.1</b> Docker</a></li>
<li class="chapter" data-level="19.2" data-path="reproducible-research-using-docker-containers-and-similar-tools.html"><a href="reproducible-research-using-docker-containers-and-similar-tools.html#python"><i class="fa fa-check"></i><b>19.2</b> Python</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="reproducible-research-using-docker-containers-and-similar-tools.html"><a href="reproducible-research-using-docker-containers-and-similar-tools.html#install-anaconda"><i class="fa fa-check"></i><b>19.2.1</b> Install Anaconda</a></li>
<li class="chapter" data-level="19.2.2" data-path="reproducible-research-using-docker-containers-and-similar-tools.html"><a href="reproducible-research-using-docker-containers-and-similar-tools.html#creat-new-python-environments"><i class="fa fa-check"></i><b>19.2.2</b> Creat new python environments</a></li>
<li class="chapter" data-level="19.2.3" data-path="reproducible-research-using-docker-containers-and-similar-tools.html"><a href="reproducible-research-using-docker-containers-and-similar-tools.html#deepresolution2"><i class="fa fa-check"></i><b>19.2.3</b> Deepresolution2</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Handbook of comprehensive suspect and nontarget workflows in environmental analysis using GC and LC-HRMS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="GClib" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">14</span> MTM HRMS Library: GC-HRMS<a href="GClib.html#GClib" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>This tutorial is based on the research paper by Price et al (Open, High-Resolution EI+ Spectral Library of Anthropogenic Compounds, Frontiers in Public Health, 2021, DOI=10.3389/fpubh.2021.622558).</em></p>
<p>This tutorial will guide you through the different steps to export the spectra information for each compound from a standard to contribute to the MTM HRMS spectral library. The overall goal is to analyze chemical standards to generate spectral fingerprints so we can combined all spectra of different standards into one spectral library. This can then be used as a suspect list which we can use to match any unknown compounds. This is a very common concept within GC screening, and the most commonly used spectral library is the NIST which has more than 100,000 compounds. The main drawback of NIST is that most of the GC spectra was recorded with nominal mass resolution. This makes spectral matching uncertain and false positives are common. The use of HRMS can reduce the uncertainty in spectral matching as well as provide clean deconvoluted spectra for real samples thus greatly reduce false positives and false negatives.</p>
<p>To build the spectral library, we first start with the raw data file from the HRMS analysis of a standard (.raw for Thermo, etc) and then we want to generate an <strong>.msp</strong> file as the final file format. The msp file is a file format developed by NIST to store mass spectral data. For more information about this format, please see this <a href="https://chemdata.nist.gov/dokuwiki/lib/exe/fetch.php?media=chemdata:nist17:nistms_ver23man.pdf">document</a>. Here, we use a slightly different format commonly called “RIKEN MSP,” but both can usually be used for most software that read msp files (although if you get error then different .msp formats could be a reason).</p>
<p>The overall goal can be seen in Figure <a href="GClib.html#fig:combineMSP">14.1</a></p>
<div class="figure"><span style="display:block;" id="fig:combineMSP"></span>
<img src="images/speclib/combineMSP.png" alt="Overall goal of the msp suspect list library" width="1710" />
<p class="caption">
Figure 14.1: Overall goal of the msp suspect list library
</p>
</div>
<p>If compounds were analyzed using GC, then you also need to include an <strong>alkane mix</strong> to be able to calculate the retention index (RI). In our lab, we use a mix consisting of C7-C40 alkanes. Ask Thanh for the alkane mix. You can find some representative chromatograms with retention times of the alkane mix for a 30 m DB-5ms column in the file “<em>/MTM_HRMS_LIB/MSDIAL_PROJECT/MSDIAL_params/AlkaneMixRT.pptx</em>.” If you are using a new GC method or new column, then it is recommended to also run an odd alkane chain standard to specifically identify the alkanes in the C7-C40 mix. The metabolomics lab has an C11-C25 odd alkane mix we can use. Alternatively, you can run standards with compounds of known RI, which enable you to check if the retention time for alkanes have been correctly picked.<br />
A <strong>solvent blank</strong> also needs to be analyzed together with the standards in order to subtract any blank signals at a later stage.</p>
<p>The main steps of this procedure can be seen in below Figure <a href="GClib.html#fig:diagramSpeclib">14.2</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:diagramSpeclib"></span>
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c5922969c8f9f1f9b36f" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-c5922969c8f9f1f9b36f">{"x":{"diagram":"\ndigraph Scheme {\n      \n# graph statement\ngraph [layout = dot, overlap = false, rankdir = TB]\n\n# node statements\nnode [shape = box]\n\nA [label = \"Analysis of standard \\n using LC-HRMS or GC-HRMS.\", fontsize = 24]\n\nB [label = \"Convert raw data from \\n vendor format to mzML file format\", fontsize = 24]\n\nC [label = \"Fill in compound and \\n method information in template\", fontsize = 24]\n\nD [label = \"Use MS-DIAL to perform spectral \\n deconvolution and generate \\n spectra for each compound\", fontsize = 24]\n\nE [label = \"Export the spectra to MS-FINDER \\n to annotate spectral peaks\", fontsize = 24]\n\nF [label = \"Export final spectra to msp format\", fontsize = 24]\n      \n      \n# edge statements\nedge [color = black]\nA -> {B}\nB -> {C}\nC -> {D}\nD -> {E}\nE -> {F}\n\n      \n      }\n      ","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 14.2: General workflow for spectral library
</p>
</div>
<p>The project is organized in different subfolders within the main folder folder named “<em>MTM_HRMS_LIB”</em>. Do not change the name of any folders. The template folder for the spectral library is organized as follows:</p>
<pre><code>MTM_HRMS_LIB
│   MTMxxxxx_GC-EI-FT_POSITIVE.xlsx
|   MTMxxxxx_LC-ESI-QTOF_POSITIVE.xlsx
│   ..
└───0_Main_Lib
│   │   MTM_HRMS_MAINLIB.xlsx
│   │   ..
│   
└───1_Standard_infosheets
│   │   MTM00001_GC-EI-FT_POSITIVE.xlsx
│   │   MTM00002_GC-EI-FT_POSITIVE.xlsx
|   |   ..
│
└───2_mzML_data
│   └───GC_CI_NEG_HRMS
│   └───GC_CI_POS_HRMS
│   └───GC_EI_HRMS
|   └───LC_ESI_NEG_HRMS
│   └───LC_ESI_POS_HRMS
|
└───3_MSP
│   │   MTM00001_GC-EI-FT_POSITIVE_IASLDLGGHXYCEO-HWKANZROSA-N.msp
│   │   MTM00002_GC-EI-FT_POSITIVE_UPMLOUAZCHDJJD-UHFFFAOYSA-N.msp
│   │   ..
│
└───4_Massbank
│   │   MTM00001.txt
|   |   MTM00002.txt
|   |   ..
│
└───MSDIAL_PROJECT
|   └───MSDIAL_params
|   
└───R
    |   MTM_HRMS_database.Rmd
    </code></pre>
<p>The main folder (MTM_HRMS_LIB) contain some template info sheet that needs to be filled to provide information about the chemical standard and the analysis method. The MTM id number (MTMxxxxx) for each standard infosheet is in numeric order and must contain 8 character in total (e.g. MTM00001). Check the MTM_HRMS_MAINLIB.xlsx for the latest id number and use the next one as the new MTM id.</p>
<p><strong>INSTALL REQUIRED SOFTWARE</strong></p>
<p>Several software and packages are needed to generate the spectra library. All are open access and free to use for academic purposes.</p>
<ul>
<li><em>Proteowizard</em>: We mainly use <strong>MSConvert</strong> which is bundled in the Proteowizard software package and you can download it <a href="http://proteowizard.sourceforge.net/download.html">here</a>.<br />
</li>
<li><em>MS-DIAL</em>: used to analyze the mzML file and generate spectra. Download the latest version <a href="http://prime.psc.riken.jp/compms/msdial/main.html">here</a>. No installation is necessary so you only need to extract the downloaded zip file to your folder of choice.<br />
</li>
<li><em>MS-FINDER</em>: used to annotate the individual peaks in the spectrum and export to msp file. No installation is necessary so you only need to extract the downloaded zip file to your folder of choice.</li>
</ul>
<p><strong>NOTE</strong>: MSDIAL could crash when starting a new project. One fix could be to change the system langugage of Windows to English.</p>
<div id="analyze-the-standards-using-hrms" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> Analyze the standards using HRMS<a href="GClib.html#analyze-the-standards-using-hrms" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It is recommended to analyze single standards but mixtures are also feasible to analyze if the analytes are not coeluting too close to each other. The deconvolution algorithm of MS-DIAL is able to distinguish between two peaks that are closely eluted but still have slightly different retention times and peak shapes. Around 1 ppm is sufficient to get a good peak shape and ion intensities in the GC-orbitrap HRMS, but this depends of course on each specific compound. If you don’t see any peaks, then check if there is any solubility issues or that the analytes are GC compatible (boiling point, polarity,..).</p>
<p>You should also inject a <em>solvent blank</em> to perform blank subtraction later in MS-DIAL.</p>
</div>
<div id="convert-the-raw-data-file-from-gc-hrms-analysis-to-.mzml-using-msconvert-for-unifi-conversion-see-section-refmsconvertgc" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> Convert the raw data file from GC-HRMS analysis to .mzML using MSconvert (For unifi conversion, see section <a href="DataConversion.html#MSConvertGC">13.1</a><a href="GClib.html#convert-the-raw-data-file-from-gc-hrms-analysis-to-.mzml-using-msconvert-for-unifi-conversion-see-section-refmsconvertgc" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Follow the steps in section <a href="DataConversion.html#MSConvertGC">13.1</a></p>
</div>
<div id="fill-in-the-standard-infosheet" class="section level2 hasAnchor" number="14.3">
<h2><span class="header-section-number">14.3</span> Fill in the standard infosheet<a href="GClib.html#fill-in-the-standard-infosheet" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the main folder, choose one of the standard information sheets depending on whether you used LC or GC and the ionization mode. The content of the information sheet looks slightly different depending on LC or GC. Copy the chosen infosheet to the “1_Standard_infosheets” folder. In that folder, rename the copied infosheet to the new MTM id as mentioned in previous section.<br />
The infosheet is organized in accordance to the format used by <a href="https://massbank.eu//MassBank/">Massbank Europe</a>. A description on the Massbank record format can be found <a href="https://github.com/MassBank/MassBank-web/blob/main/Documentation/MassBankRecordFormat.md">here</a>. It is important that you do not change any of the titles in the first column in the infosheet, as the format requirement is quite strict. Also, try not to copy text from one cell to another as it might change the underlying format of the cells (if you think you made an error, copy the template and redo again).<br />
The rows that are in bold are information that are mandatory to fill in.</p>
<p>The “ACCESSION” row is the MTM id.</p>
<p>The “RECORD_TITLE” will be automatically generated based on the information you filled in so you should not fill this row.</p>
<p>“COMMENT: centroided mzML file name” is for internal purposes and refers to the name of the mzML file you converted and copied to the “MTM_HRMS_LIB/2_mzML_data/../” folder.</p>
<p>“COMMENT: msp file name” is automatically generated and will be used later to name the msp file.</p>
<p>“COMMENT: CONFIDENCE” refers to how confident you are of the identification of your standard according to the <a href="https://pubs.acs.org/doi/abs/10.1021/es5002105">“Schymanski scale”</a>. Leave it as “Reference Standard (Level 1),” unless there are standards where you cannot distinguish or identify between different isomers in a standard. In this case, you should use “Level 3.” An example is “Technical mixture (Level 3),” where we analyzed a technical standard (usually &lt;90% purity) and several isomeric peaks can be seen in the chromatogram. In this case, I usually individually register each isomer in its own infosheet (spectral peak patterns will look very similar with slight differences and retention time is different).</p>
<p>“COMMENT: QUANTMASS.” This is the quantification mass for MSDIAL to find for EIC of model ions to compare different samples and groups. Choose the monoisotopic ion if possible or the highest peak at the higher end of the mass range. Copy this m/z directly from the msp file so the decimals matches.</p>
<p>“CH$NAME:” occurs twice which means you have to input two different names for the compound in the standard, because a compound can have different names. It could be the common name specified in PubChem, the IUPAC name, trade name or the abbreviation.</p>
<p>“CH$IUPAC” is the InChI and always starts with “InChI=.” You can find all these information for the compound by searching in <a href="https://pubchem.ncbi.nlm.nih.gov/">PubChem</a>.</p>
<p>For GC compounds, you also need to fill in the <em>COMMENT: QUANTMASS</em>, <em>AC$CHROMATOGRAPHY: KOVATS_RTI</em> and <em>AC$CHROMATOGRAPHY: RETENTION_TIME</em>. These will be made available later in MS-DIAL.</p>
<p>The other rows should be quite straightforward to fill in. If you use the same method for many standards, then you can save a copy of an infosheet to use as a method template, while only updating information for each specific compound: ACCESSION, DATE, COMMENT: centroided mzML file name, CH$NAME, CH$NAME, CH$FORMULA, CH$EXACT_MASS:, CH$SMILES:, CH$IUPAC:, CH$LINK: CAS, CH$LINK: INCHIKEY</p>
<p>The <em>AC$CHROMATOGRAPHY: RETENTION_TIME</em> row will be obtained later using MS-DIAL.</p>
<p>Now that you have filled in most information about the compound, we can proceed to process the mzML file to extract the spectra using MS-DIAL (although you can also first process the mzML files and then fill in the information afterwards).</p>
</div>
<div id="use-ms-dial-to-perform-spectral-deconvolution-and-generate-spectra-for-each-compound" class="section level2 hasAnchor" number="14.4">
<h2><span class="header-section-number">14.4</span> Use MS-DIAL to perform spectral deconvolution and generate spectra for each compound<a href="GClib.html#use-ms-dial-to-perform-spectral-deconvolution-and-generate-spectra-for-each-compound" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The graphical user interface of MS-DIAL takes some time to get used to since it is centered around detected peaks. It is important that you choose the correct parameters in the beginning since the parameters can affect the peak detection and alignment, or else you need to redo the data preprocessing again which could take long time if you are analyzing a lot of samples. When you run a large number of real samples, it is recommended to first optimize the parameters using e.g. QC samples. In this case where we analyze standards, then the default parameters with some instrument specific parameters can be used. These are found in the subfolder <em>MSDIAL_PROJECT/MSDIAL_params/</em>. If you want to know more details about data processing using MS-DIAL, please check the <a href="https://mtbinfo-team.github.io/mtbinfo.github.io/MS-DIAL/tutorial.html">MS-DIAL online tutorial</a>.</p>
<p>The below steps are based on the workflow for GC-EI orbitrap data described by <a href="https://www.frontiersin.org/articles/10.3389/fpubh.2021.622558/full">Price et al.</a>.</p>
<p><strong>1.</strong> In the File menu, start a new project. You must choose a file path where the mzML file(s) are located. When the data analysis is finished, several files associated with the analysis is created in the same folder. Depending on GC or LC analysis, then different parameters needs to be selected. Below Figure <a href="GClib.html#fig:MSDIALStartup">14.3</a> shows parameters for GC analysis. GC-EI is a hard ionization and we also centroided the mzML file so these paramters needs to be specified.</p>
<div class="figure"><span style="display:block;" id="fig:MSDIALStartup"></span>
<img src="images/speclib/MSDIAL_startproject.png" alt="Starting a new project for GC analysis" width="1519" />
<p class="caption">
Figure 14.3: Starting a new project for GC analysis
</p>
</div>
<p>Click on the “Advanced: add further meta data” tab. The information for different instruments in our lab can be found in the file “/MTM_HRMS_LIB/MSDIAL_PROJECT/MSDIAL_params/Metadata.txt.” If your instrument is not present then you can input these by yourself. This metadata is optional but the information will be added to the msp file later so please fill this in.</p>
<p>When you are finished, click on next.</p>
<p><strong>2.</strong> Click on the browse button and then you will select the files to process. The default file format is .abf but we want to process .mzML so choose this file format instead. You will now see the mzML file(s) in your working directory. If you want to process multiple files use <em>Shift/Ctrl + select</em>. Make sure your standards are designated as “Sample.” You should include a solvent blank which will be designated as “Blank.” The other columns are for post processing and not important for this spectral database workflow. You can learn more about these in the <a href="https://mtbinfo-team.github.io/mtbinfo.github.io/MS-DIAL/tutorial.html">tutorial</a>.</p>
<div class="figure"><span style="display:block;" id="fig:MSDIALChoosefiles"></span>
<img src="images/speclib/MSDIAL_choosefiles.png" alt="Choosing files" width="1514" />
<p class="caption">
Figure 14.4: Choosing files
</p>
</div>
<p>Click on next to the Analysis parameter settings.</p>
<p><strong>3.</strong> The following instructions are for GC-EI orbitrap data, but the other processing methods are similar. Click on the “Load” button and select the “GC_EI_Orbitrap.med2” (for GC-EI-orbtrap files) file located in the “/MTM_HRMS_LIB/MSDIAL_PROJECT/MSDIAL_params/” folder. This will load the preset parameters for this instrument. You can set the parameters that are suitable for your specific analysis. Click on the “Advanced” tab and you can also choose how many samples (threads) to process in parallel. Continue with the “Peak detection” tab and set an appropriate minimum peak height. This is instrument specific and also depends on the concentration of the analytes. If the “Accurate MS” box is not checked, then select it. Below Figure <a href="GClib.html#fig:MSDIALPeakdetection">14.5</a> shows the parameters for the GC-EI orbitrap. The smoothing levels and width can be set as 3 and 10 respectively for GC analysis.</p>
<div class="figure"><span style="display:block;" id="fig:MSDIALPeakdetection"></span>
<img src="images/speclib/MSDIAL_peakdetection.png" alt="Peak detection parameters" width="707" />
<p class="caption">
Figure 14.5: Peak detection parameters
</p>
</div>
<p>Continue to the “MS1Dec” tab.</p>
<p><strong>4.</strong> The sigma window value is an important parameter which determines the efficiency of the deconvolution algorithm. The parameter depends on the instrument and Figure <a href="GClib.html#fig:MSDIALMS1Dec">14.6</a> shows the recommended ones for the GC orbitrap analysis of standards. From the <a href="https://mtbinfo-team.github.io/mtbinfo.github.io/MS-DIAL/tutorial.html#chapter-4">online tutorial</a>: <em>“The sigma window value is highly affected by the resolution of deconvolution. A higher value (0.7-1.0) will reduce the peak top resolutions, i.e. the number of resolved chromatographic peaks will be decreased. On the other hand, a lower value (0.1-0.3) may also recognize many noise chromatographic peaks. In addition, you may set a cutoff value to reduce the MS noises (see Section 3-3 of Chapter 3 of the online manual). This is the same as LC/MS part.”</em></p>
<div class="figure"><span style="display:block;" id="fig:MSDIALMS1Dec"></span>
<img src="images/speclib/MSDIAL_MS1Dec.png" alt="MS1Dec parameters" width="709" />
<p class="caption">
Figure 14.6: MS1Dec parameters
</p>
</div>
<p>Continue to the “Identification” tab.</p>
<p><strong>5.</strong> If you process GC data, we mainly want to “Use retention index (RI).” If the below “Set” button cannot be clicked, then first click on the “Use retention time (min)” button and the back again to the “Use retention index (RI)” button and then you will be able to click on the “Set” button next to the Index file (Figure <a href="GClib.html#fig:MSDIALIdentification">14.7</a>). The “Index type” should be set to “Alkanes” since we analyzed an alkane mix. If you are using LC, then you should choose “Use retention time (min),” since no retention index mix is used (yet). After you clicked the Set button, you will then choose a retention index file that include the retention time (in minutes) of the different alkanes in the mixture. A template of how the format should be can be found in the file “/MTM_HRMS_LIB/MSDIAL_PROJECT/MSDIAL_params/xxxxxx_RTI_MSDIAL.txt.” Adjust the retention time depending on your specific analysis after checking the chromatogram of the alkane mix. An example of the retention times of alkane mix can be found in the “<em>/MTM_HRMS_LIB/MSDIAL_PROJECT/MSDIAL_params/AlkaneMixRT.pptx</em>” file. After you chosen the RTI file, <em>right click on the mouse</em> on the cell and choose autofill.</p>
<div class="figure"><span style="display:block;" id="fig:MSDIALIdentification"></span>
<img src="images/speclib/MSDIAL_identification.png" alt="Identification parameters" width="707" />
<p class="caption">
Figure 14.7: Identification parameters
</p>
</div>
<p>The other parameters are not important for this standard library generation workflow and you can click on the “Alignment” tab. The purpose of alignment is to align all individual samples so the retention times for the same for the same compound between all samples. This is because the chromatographic retention time will slightly change between runs and batches and needs to be aligned for downstream data processing. You do not need to pay attention to this tab for the spectral library purpose. continue to the last tab “Filtering.”</p>
<p>Select the “Remove features based on blank information”and choose 5 fold change. This will remove any features that are lower than five times the blank samples (solvent blank in this case).</p>
<div class="figure"><span style="display:block;" id="fig:MSDIALFiltering"></span>
<img src="images/speclib/MSDIAL_filtering.png" alt="Filtering parameters" width="708" />
<p class="caption">
Figure 14.8: Filtering parameters
</p>
</div>
<p>Now you are done and click on “Finish.” Sample processing might take a while depending on the processing power and the number of samples.</p>
<p>After the peak detection and deconvolution process has finished, you should see below screen.</p>
<div class="figure"><span style="display:block;" id="fig:MSDIALSample"></span>
<img src="images/speclib/MSDIAL_7.png" alt="x" width="1728" />
<p class="caption">
Figure 14.9: x
</p>
</div>
<p>Double click on the sample name where your standard was analyzed (see 1 in Figure <a href="GClib.html#fig:MSDIALSample">14.9</a>). Your screen will be switched to the “Peak spot viewer” tab. Each detected component will be seen as a downward pointing triangle (see 2 in Figure <a href="GClib.html#fig:MSDIALSample">14.9</a>). You should zoom in to the peak by moving you pointer to below the x-axis and scroll to zoom in the retention time axis (3). You should now be able to see the peak more clear and click on the peak as seen in 4 in Figure <a href="GClib.html#fig:MSDIALPeak">14.10</a>.</p>
<div class="figure"><span style="display:block;" id="fig:MSDIALPeak"></span>
<img src="images/speclib/MSDIAL_8.png" alt="x" width="1809" />
<p class="caption">
Figure 14.10: x
</p>
</div>
<p>You can then see the EIC (5) of the chosen peak to check if the peak shape is good. The extracted spectrum is shown in (6), and the retention time and retention index can be seen in (7). This is the deconvoluted spectrum and you can see the peak shape of the ion fragments with the highest intensities by choosing the “EI chrom” tab (8) which allows you to see if the deconvolution process has been successful (9). A note here is that the EIC shown in (5) is usually for the most intense spectral peak in the deconvoluted spectrum. When you feel that the quality is satisfactory, then you can export the spectrum to MS-FINDER by clicking on the “MS FINDER search” button (10).</p>
<div class="figure"><span style="display:block;" id="fig:MSFINDER"></span>
<img src="images/speclib/MSDIAL_9.png" alt="x" width="1921" />
<p class="caption">
Figure 14.11: x
</p>
</div>
<p><span style="color: red;"> ADD INFO ABOUT MS-FINDER PARAMETERS </span></p>
<p>In the new MS-FINDER window, go to “Settings” -&gt; “Parameter settings.” In the “Methods” tab, check the “Formula prediction..” and “Use internal experimental..” options. The rest should be unchecked. Other parameters are:<br />
Basic tab -&gt; Mass tolerance type (ppm), Mass tolerance MS1 and MS2 (5 ppm), Relative ab cutoff (1%) to further remove background noise.<br />
Formula finder -&gt; check “Lewis and Senior check,” check all elements suitable for your compounds.<br />
Structure finder -&gt; tree depth (2), check “Use the fragmentation library for EI.”</p>
<p>Fill in the information in (10) in Figure <a href="GClib.html#fig:MSFINDER">14.11</a> for your compound. For GC-MS, in most cases the monoisotopic peak (somewhat equivalent to the precursor ion in LC mode) is not present and you can choose the fragment ion closest to the monoisotopic mass as the “precursor m/z.” Then choose the precursor type. For GC-EI-MS: choose [M]+. (M plus dot). After you are done, select “Fragment annotation (single)” in the “Analysis” menu (11). Afterwards, select the “Fragment annotation (batch job)” under the same menu. The <em>in silico</em> annotation of the fragment ions should now be calculated (12) and you can thereafter export the annotated spectrum as an “.msp” file (see 13). Copy and paste the file name that was generated in the standard infosheet you find at the “COMMENT: msp file name” row. Save the file in the “3_MSP” subfolder.</p>
<p>Open and check the .msp file by right click and open with e.g. Notepad (dont double click as .msp is also a program installation format in Windows).<br />
<strong>NOTE:</strong> if you have processed other files in MS-FINDER before this (these will show in the “File navigator” tab), then these are all saved into the same msp file. You can either delete the old ones at the subfolder “MS-FINDER xxx/MSDIAL_TEMP/” before you process the standard, or you can manually delete the other compounds in the generated msp file.</p>
<p><strong>NOTE:</strong> Sometimes MSFINDER will also include peaks that have much higher m/z values than the monoisotopic peak and its isotopic peaks. This is due to interferences that MSDIAL could not deconvolute. In this case, you can open the .msp file and manually delete the rows with the m/z and intensity of these peaks. YOU NEED ALSO TO UPDATE THE <strong>Num Peaks:</strong> row in the .msp file since you have now deleted some peaks. Also make sure that there is two empty rows at the end of the .msp document.</p>
<p>Now you are finished with generating the msp file for your standard spectrum.</p>
<p>You can also fill in the missing information in the infosheet: <em>COMMENT: QUANTMASS</em>, <em>AC$CHROMATOGRAPHY: KOVATS_RTI</em> and <em>AC$CHROMATOGRAPHY: RETENTION_TIME</em>. The <em>COMMENT: QUANTMASS</em> is the representative mass of the standard analyte which MSDIAL will use to quantify and compare amongst different samples. If this is not indicated then MSDIAL chooses the base peak (or the silanized peaks based on parameters choosen) and these are not always representative for the analytes. Importantly, if the monoisotopic peak is present in the spectrum at a fairly high abundance (even if it is not the highest intensity peak), then this should be chosen as the <em>COMMENT: QUANTMASS</em> instead of the base peak.</p>
<p><strong>Send the newly created files to Thanh:</strong></p>
<ul>
<li>Individual infosheet(s)<br />
</li>
<li>mzML file(s)<br />
</li>
<li>msp file(s)</li>
</ul>
<p>The mainlib excel file as well as the combined msp file will be updated on a regular basis or upon request.</p>
<p>The final msp file will look something like below (not including the ## sign). A note is that the retention index is not included by MS-FINDER when you export to msp file. This will be later automatically added to the combined database based on the retention index value in the infosheet for the specific standard (at the “AC$CHROMATOGRAPHY: KOVATS_RTI” row). Therefore, it is important to check that all files have consistent MTM IDs for the same measured compound.</p>
<pre><code>## NAME: 1-Methoxy-4-(4-propylcyclohexyl)cyclohexane
## SCANNUMBER: -1
## RETENTIONTIME: 16.66233
## RETENTIONINDEX: 1815
## PRECURSORMZ: 208.20927
## PRECURSORTYPE: [M]+.
## IONMODE: Positive
## SPECTRUMTYPE: Centroid
## FORMULA: C16H30O
## INCHIKEY: JMOYCPSDEMHCFG-UHFFFAOYSA-N
## INCHI: 
## SMILES: CCCC1CCC(CC1)C2CCC(CC2)OC
## AUTHORS: Wang T. et al. MTM Research Centre, Orebro University
## COLLISIONENERGY: 70
## INSTRUMENT: Q Exactive GC Orbitrap GC-MS/MS
## INSTRUMENTTYPE: GC-EI-FT
## IONIZATION: 
## LICENSE: CC BY
## COMMENT: 
## Num Peaks: 80
## 55.05424 163078256
## 56.05759 11327176
## 57.06988 37068584
## 58.04133 10225466
## 59.04913 3163828
## 65.03855 26553580
## 66.04638 22100750
## 67.05419 693562624
## 68.05755 51898152
## 69.06983 236269520
## 70.07317 13133868
## 71.04909 151444288
## 72.05691 29205364
## 73.06474 2747695
## 77.03854 93605232
## 78.04638 61790368
## 79.05419 573201216
## 80.062   208521232
## 81.06983 1302587392
## 82.06878 1987492
## 82.07762 529499328
## 83.08546 265512848
## 84.08884 14965608
## 85.10112 10732988
## 91.05418 114294912
## 92.06201 22463942
## 93.06986 327123712
## 94.07767 117894488
## 95.04905 4559664
## 95.08546 437583808
## 96.09327 136581616
## 97.10113 106149968
## 98.10445 6473394
## 103.05417    3832939
## 105.06983    33031638
## 106.07766    6479869
## 107.08548    233612656
## 108.09329    182412208
## 109.10114    421572864
## 110.10894    91032904
## 111.11675    53111140
## 112.0882 7177564
## 113.09605    5025032
## 115.05415    3284804
## 117.06974    3204507
## 119.08552    10350805    &quot;Theoretical m/z 119.086075, Mass diff 0 (0 ppm), Formula C9H11&quot;
## 120.09335    6821262
## 121.10114    307112608   &quot;Theoretical m/z 121.10118, Mass diff 0 (0.33 ppm), SMILES CCC1CCC(C)CC1, Annotation [C9H18-5H]+, Rule of HR True&quot;
## 122.10893    282780416
## 123.11674    393876896
## 124.1246 151498160
## 125.12802    22628860
## 133.1012 7754902 &quot;Theoretical m/z 133.101725, Mass diff 0 (0 ppm), Formula C10H13&quot;
## 134.10895    3176842 &quot;Theoretical m/z 134.108995, Mass diff 0 (0.34 ppm), SMILES CCC1CCC(CC)CC1, Annotation [C10H20-6H]+, Rule of HR False&quot;
## 135.11678    219233840   &quot;Theoretical m/z 135.116821, Mass diff 0 (-0.31 ppm), SMILES C\C=C\C=C1\CCC[C+]1C, Annotation [C10H15]+, Rule of HR True&quot;
## 136.12462    53804344
## 137.13242    38836660    &quot;Theoretical m/z 137.13247, Mass diff 0 (0.37 ppm), SMILES CCCC1CCC(C)CC1, Annotation [C10H20-3H]+, Rule of HR True&quot;
## 138.14018    25185838
## 139.14809    11154908    &quot;Theoretical m/z 139.148121, Mass diff 0 (0.22 ppm), SMILES CCCC1CCC(C)CC1, Annotation [C10H20-H]+, Rule of HR True&quot;
## 147.11674    2291410 &quot;Theoretical m/z 147.117375, Mass diff 0 (0 ppm), Formula C11H15&quot;
## 149.13238    75286480    &quot;Theoretical m/z 149.132476, Mass diff 0 (0.64 ppm), SMILES CCC1CCC(CC1)C(C)C, Annotation [C11H22-5H]+, Rule of HR True&quot;
## 150.1402 29362468    &quot;Theoretical m/z 150.140301, Mass diff 0 (0.67 ppm), SMILES CCCC1CCC(CC)CC1, Annotation [C11H22-4H]+, Rule of HR False&quot;
## 151.148  23773808    &quot;Theoretical m/z 151.148126, Mass diff 0 (0.83 ppm), SMILES CCCC1CCC(CC)CC1, Annotation [C11H22-3H]+, Rule of HR True&quot;
## 152.1515 2928506
## 161.1324 2178252 &quot;Theoretical m/z 161.133026, Mass diff 0 (0 ppm), Formula C12H17&quot;
## 162.14021    5460352
## 163.14796    513516864   &quot;Theoretical m/z 163.148126, Mass diff 0 (1.02 ppm), SMILES C1CCC(CC1)C2CCCCC2, Annotation [C12H22-3H]+, Rule of HR True&quot;
## 164.15137    122409664
## 165.15913    19514364
## 166.16704    2086600
## 167.1429 4521269 &quot;Theoretical m/z 167.143045, Mass diff 0 (0.87 ppm), SMILES O(C)C1CCC(CC1)C(C)CC, Annotation [C11H22O-3H]+, Rule of HR True&quot;
## 177.1636 256769824   &quot;Theoretical m/z 177.163781, Mass diff 0 (1.02 ppm), SMILES CC1CCC(CC1)C2CCCCC2, Annotation [C13H24-3H]+, Rule of HR True&quot;
## 178.16693    45725136
## 179.17041    4097704
## 180.18657    1308408
## 191.1792 17871500    &quot;Theoretical m/z 191.179422, Mass diff 0 (1.16 ppm), SMILES CCC1CCC(CC1)C2CCCCC2, Annotation [C14H26-3H]+, Rule of HR True&quot;
## 192.1825 2655085
## 206.2027 271511328
## 207.20602    42997728
## 208.20927    3335620</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="DataConversion.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mtm-hrms-library-lc-hrms.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown/edit/master/inst/examples/14-HRMS_Spectral_Lib_GC.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["SSANTA.pdf", "SSANTA.epub", "SSANTA.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
